<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
<h:head>
    <title>Menú Principal del Laboratorio</title>
</h:head>
<h:body>
    <h1>Menú Principal - Sistema Multitenant</h1>
    
    <!-- Tenant Selector -->
    <div style="background-color: #f0f0f0; padding: 15px; margin-bottom: 20px; border: 2px solid #333;">
        <h3>Seleccionar Prestador de Salud (Tenant)</h3>
        <p>Para acceder al sistema, primero seleccione un prestador de salud:</p>
        <h:form>
            <h:outputLink value="#{request.contextPath}/prestadorSalud?prestadorRUT=">
                Administrar Prestadores de Salud
            </h:outputLink>
        </h:form>
        
        <form method="get" action="#{request.contextPath}/usuarioServicioSalud">
            <label>RUT del Prestador: 
                <input type="text" name="prestadorRUT" placeholder="Ej: 123456789012" required />
            </label>
            <button type="submit">Establecer Tenant</button>
        </form>
        
        <% 
          String currentTenant = (String) session.getAttribute("currentTenantRUT");
          if (currentTenant != null && !currentTenant.isEmpty()) {
        %>
        <p style="color: green; font-weight: bold;">Prestador actual: <%= currentTenant %></p>
        <% } else { %>
        <p style="color: red;">No hay prestador seleccionado</p>
        <% } %>
    </div>
    
    <p>Seleccione una opción para continuar:</p>

    <!-- Usamos un formulario para los botones de JSF -->
    <h:form>
        <ul>
            <li>
                <!-- BOTÓN PARA VISTA JSF (.xhtml) -->
                <!-- 'outcome' navega a otra vista JSF. JSF busca un archivo con este nombre. -->
                <!-- No necesitas poner la ruta completa ni la extensión .xhtml -->
                <h:button value="Gestionar Trabajadores de Salud (JSF)" 
                          outcome="vistas/TrabajadorSaludVista" />
            </li>
            
            <li>
                <!-- ENLACE PARA VISTA SERVLET (.jsp) -->
                <!-- Para llamar a un servlet, usamos un enlace normal. -->
                <!-- '#{request.contextPath}' es la forma correcta de obtener la URL base de tu app, ej: /Laboratorio-web -->
                <h:outputLink value="#{request.contextPath}/prestadorSalud">
                    Gestionar Prestadores de Salud (Servlet)
                </h:outputLink>
            </li>
            
            <li>
                <!-- ENLACE PARA VISTA SERVLET (.jsp) -->
                <h:outputLink value="#{request.contextPath}/usuarioServicioSalud">
                    Gestionar Usuarios y Servicios (Servlet)
                </h:outputLink>
            </li>
        </ul>
    </h:form>
</h:body>
</html>